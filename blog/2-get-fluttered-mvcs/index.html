<!doctype html><html lang=en-us><head><meta charset=utf-8><meta charset=utf-8><meta name=description content="MayJuun: Less Clicking, More Doctoring"><meta name=author content="MayJuun"><meta name=generator content="Hugo 0.81.0"><meta name=format-detection content="telephone=no"><meta name=viewport content="width=device-width,initial-scale=1"><title>Get Fluttered: MVC+S Architecture, Example</title><link rel=icon href=https://mayjuun.com/images/favicon.ico><link rel=stylesheet href=https://mayjuun.com/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://mayjuun.com/plugins/ionicons/ionicons.min.css><link rel=stylesheet href=https://mayjuun.com/plugins/animate-css/animate.css><link rel=stylesheet href=https://mayjuun.com/plugins/slider/slider.css><link rel=stylesheet href=https://mayjuun.com/plugins/slick/slick.css><link rel=stylesheet href=https://mayjuun.com/plugins/facncybox/jquery.fancybox.css><link rel=stylesheet href=https://mayjuun.com/plugins/hover/hover-min.css><link rel=stylesheet href=https://mayjuun.com/css/style.min.css integrity media=screen></head><body><section class="top-bar animated-header"><div class=container><div class=row><div class=col-lg-12><nav class="navbar navbar-expand-md navbar-light bg-light"><a class=navbar-brand href=https://mayjuun.com/><img src=https://mayjuun.com/images/logo.png alt=logo></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=https://mayjuun.com/>Home</a></li><li class=nav-item><a class=nav-link href=https://mayjuun.com/blog>Meta-Blog</a></li><li class=nav-item><a class=nav-link href=https://mayjuun.com/portfolio>Flutter Portfolio</a></li><li class=nav-item><a class=nav-link href=https://mayjuun.com/gallery>Figma Gallery</a></li><li class=nav-item><a class=nav-link href=https://mayjuun.com/about>About</a></li><li class=nav-item><a class=nav-link href=https://mayjuun.com/service>Services</a></li><li class=nav-item><a class=nav-link href=https://mayjuun.com/contact>Contact</a></li></div></nav></div></div></div></section><section class=global-page-header><div class=container><div class=row><div class=col-md-12><div class=block><h2>Get Fluttered: MVC+S Architecture, Example</h2><div class=portfolio-meta><span>Thursday, Jan 14, 2021</span>|
<span>Tags:
flutter, mvc+s, get_fluttered, prapare, tutorial</span></div></div></div></div></div></section><section class=single-post><div class=container><div class=row><div class=col-md-12><div class=post-img><img class=img-fluid alt src=https://mayjuun.com/images/blog/2-get-mvcs/get-mvcs-logo.png></div><div class=post-content><h2 id=intro-->Intro -</h2><p>To all who watched my original GetFluttered: MVC+S Architecture video, I want to thank you immensely for your patience.</p><p>Before making new GetFluttered videos, we wanted to implement:</p><ol><li>A means to provide written, supplemental info &mldr; <a href=https://mayjuun.com/blog/>Meta-Blog</a>;</li><li>A complex, production-level MVC+S example &mldr; <a href=https://github.com/firejuun/prapare>PRAPARE app</a>; &</li><li>A means for others to join / collaborate &mldr; <a href=https://join.slack.com/t/fhir-fli/shared_invite/zt-ofv2cycm-9yjdMj8a~zXp7nDBeB_sNQ>FlutterJuun Slack invite</a>.</li></ol><p>With these elements now firmly established, it should be easier to follow along with GetFluttered content by comparing <a href=https://github.com/FireJuun/get_fluttered>simple</a> + <a href=https://github.com/FireJuun/prapare>complex</a> code examples that achieve the same objective.</p><p>Given our healthcare focus, and specifically our interest in connecting <a href=https://www.hl7.org/fhir/overview.html>FHIR</a> to Flutter, our roadmap for GetFluttered videos will also include some <a href=https://www.fhirfli.dev/>FHIR-FLI</a> content&mldr;but by no means is the GetFluttered series limited to health apps. Many of the topics covered can be applied to any Flutter app.</p><p>Here&rsquo;s the primer on FHIR-FLI:</p><div style=text-align:center class="embed video-player"><iframe class=youtube-player type=text/html src=https://www.youtube.com/embed/nE3faNn9aNU frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></iframe></div><p><del>Finally, I plan to periodically update this architecture page so the Slack invite remains active (since Slack links now expire after 30 days)&mldr;but if I miss it, let me know in a comment on one of my YouTube videos. I’ll respond to your comment when the invite link is reactivated.</del> Update: link should no longer expire.</p><h3 id=mvcs-architecture>MVC+S: Architecture</h3><div style=text-align:center class="embed video-player"><iframe class=youtube-player type=text/html src=https://www.youtube.com/embed/2ttaAMkce6I frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></iframe></div><p>You should probably start by reading Ryan Edge’s post on <a href=https://poetryincode.dev/flutter-state-5-ways>Flutter State 5 Ways</a>. Then read GSkinner’s article on <a href=https://blog.gskinner.com/archives/2020/09/flutter-state-management-with-mvcs.html>MVC+S Architecture.</a> Finally, check whatever latest discussions may exist in the Flutter community. As of Jan 2021, <a href="https://youtu.be/sYG7HAGu_Eg?t=7440">Simon Lightfoot’s video</a> may be a good start&mldr;</p><p>When deciding state / architecture, consider:</p><ul><li>Do your classes follow the single responsibility principle?</li><li>Are they testable?</li><li>Are they modular?</li><li>How difficult is this setup?</li><li>Are others able to understand and build from it?</li></ul><p>Ultimately, we decided upon the <a href=https://pub.dev/packages/get>Get</a> package to manage state and the GSkinner suggestion on MVC+S for our architecture. Because Get uses its controllers &ndash; not models &ndash; to manage state, we elected to make slight modifications from the original GSkinner approach.</p><figure class=img-center><img src=/images/blog/2-get-mvcs/get-mvcs-diagram.png width=75%><figcaption><h4>Get MVC+S Diagram</h4></figcaption></figure><h3 id=working-with-streams>Working with Streams</h3><p>In the Architecture video, I particularly made a point of swapping between <code>int counter = 0;</code> and <code>RxInt rxCounter = 0.obs;</code> because I wanted you to be able to use this architecture with and without <a href=https://youtu.be/nQBpOIHE4eE>streams</a>. GetX makes it extremely easy to work with streams and with minimal boilerplate, so you should feel comfortable swapping between the two.</p><p>Keep in mind that the <code>GetX</code> and <code>OBx</code> methods require a stream to function properly. If it isn’t a stream, use <code>GetBuilder</code> instead. Also, make sure to call <code>update();</code> in your controller if you need to trigger a UI refresh.</p><p>I was very intentional in my <a href=https://github.com/FireJuun/get_fluttered/commits/1_get_mvcs_architecture>GetFluttered commit history</a> to have each commit focus on a single objective in my video. Swapping between typical variables &lt;&ndash;> streams is one example where <a href=https://github.com/FireJuun/get_fluttered/commit/78b69ff7fd2cd151843bfc19e57bae41fceece6e>the commit log</a> can help. I plan to continue this format as best I can (and within reason).</p><h3 id=variable-names--streams>Variable Names ± Streams</h3><p>Initially, I was quite strict about updating all variable names to include ‘rx’ at the front if it referenced a stream&mldr;but as we built PRAPARE it became apparent that this level of control seemed more a hindrance than a benefit. Including ‘rx’ was useful in many cases, but should not be a set requirement. For complex data models, I would suggest you focus on variables and method names that are easy to read / understand, following patterns when it makes sense to do so.</p><h2 id=mvcs-example>MVC+S: Example</h2><div style=text-align:center class="embed video-player"><iframe class=youtube-player type=text/html src=https://www.youtube.com/embed/FvB9PbGfmRk frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></iframe></div><p>In my opinion, learning about folder structure is best accomplished via example. Our video outlining the PRAPARE app as a complex example of the MVC+S architecture pattern should help. Keeping everything in one place, this is the general guideline we followed:</p><table><thead><tr><th><strong>Folder</strong></th><th><strong>Subfolder</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>/_internal</td><td></td><td>custom modifications, constants / enums, utility classes</td></tr><tr><td></td><td>/components</td><td>custom components / variations on Flutter widgets</td></tr><tr><td></td><td>/constants</td><td>local constants created for the app</td></tr><tr><td></td><td>/enums</td><td>predefined, named constants</td></tr><tr><td></td><td>/utils</td><td>local functions that do things like formatting</td></tr><tr><td>/api</td><td></td><td>optional API key location</td></tr><tr><td></td><td>&lt;custom>.dart</td><td>private API keys</td></tr><tr><td></td><td>api_public.dart</td><td>public API keys (no gitignore)</td></tr><tr><td></td><td>api.dart</td><td>generic export file</td></tr><tr><td>/controllers</td><td></td><td>manages state of the model and resultant data</td></tr><tr><td></td><td>/commands</td><td>performs a specific global task (login, logout, change password)</td></tr><tr><td></td><td>../&lt;custom>_command.dart</td><td>custom command class</td></tr><tr><td></td><td>../abstract_command.dart</td><td>abstract class for commonly used controllers, placeholder execute() method for commands</td></tr><tr><td></td><td>&lt;custom>_controller.dart</td><td>custom controller, typically used for state management</td></tr><tr><td>/models</td><td></td><td>classes / objects created specifically for this app</td></tr><tr><td></td><td>&lt;custom>_data.dart</td><td>custom data class</td></tr><tr><td></td><td>&lt;custom>_model.dart</td><td>data model that typically modifies or shapes a data class</td></tr><tr><td>/routes</td><td></td><td>maps route to screen widgets</td></tr><tr><td></td><td>app_pages.dart</td><td>the directory of each page within an app</td></tr><tr><td></td><td>app_routes.dart</td><td>string route names used in the app</td></tr><tr><td>/services</td><td></td><td>interaction with the outside world (REST, FHIR, http, file storage)</td></tr><tr><td>/ui</td><td></td><td>essentially all things a user sees in the app</td></tr><tr><td></td><td>/styled_components</td><td>shared widgets that use a common design system / theme so that the app seems consistent across screens</td></tr><tr><td></td><td>../styled_&lt;widget_name>.dart</td><td></td></tr><tr><td></td><td>/views</td><td>top level widgets that are loaded via a route</td></tr><tr><td></td><td>../&lt;screen_name>/</td><td></td></tr><tr><td></td><td>../../&lt;screen_name>.dart</td><td>the screen widget, may optionally include &lsquo;page&rsquo;, &lsquo;card&rsquo;, or &lsquo;panel&rsquo; at the end based on view type</td></tr><tr><td></td><td>../../&lt;screen_name>_binding.dart</td><td>controllers/services that are loaded (or lazy-loaded) in a view</td></tr><tr><td></td><td>../../&lt;screen_name>_controller.dart</td><td>the viewcontroller that only affects this screen widget</td></tr><tr><td></td><td>../../&lt;screen_name>_test.dart</td><td>any relevant tests for the screen widget or its viewcontroller</td></tr><tr><td></td><td>icons.dart</td><td>icon asset locations</td></tr><tr><td></td><td>localization.dart</td><td>strings with multiple translations</td></tr><tr><td></td><td>strings.dart</td><td>strings used throughout an app</td></tr><tr><td></td><td>themes.dart</td><td>custom themes and font sizes</td></tr><tr><td>main.dart</td><td></td><td>the first file a Dart app runs</td></tr></tbody></table><h2 id=conclusion>Conclusion</h2><p>I hope these written supplements will be useful as you design and build your own Flutter apps.</p><p>If there are any questions, or if you have any specific requests for GetFluttered topics to cover next, feel free to join us on the FlutterJuun Slack. A lot of GetFluttered content will build directly off of the work we already created in PRAPARE, and we have a lot of features to cover (themes, locales, databinding, serialization, etc.) in the short-term. That said, the path forward is pretty flexible and welcome to suggestions.</p><p>Keep learning, keep creating, and stay safe!</p><p>&ndash;John</p><h2 id=addendum>Addendum</h2><p>Since creating this post, I made another YouTube video that shows this architecture in much greater detail, using the PRAPARE app as an in-depth example.</p><div style=text-align:center class="embed video-player"><iframe class=youtube-player type=text/html src=https://www.youtube.com/embed/4IZRCfx9Ves frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></iframe></div><p>Relevant timestamps for Get MVC+S architecture folder structure begin at ~50 min.</p></div></div></div></div></section><section id=call-to-action><div class=container><div class=row><div class=col-md-12><div class=block><h2 class="title wow fadeInDown" data-wow-delay=.3s data-wow-duration=500ms>Want to Learn More?</h1><a href=/contact class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=.7s data-wow-duration=500ms>Contact Us</a></div></div></div></div></section><footer id=footer><div class=container><div class="row content-justify-between"><div class="col-md-8 col-12 text-center text-lg-left text-md-left"><p class=copyright>Copyright
<span><script>document.write((new Date).getFullYear())</script></span>by MayJuun, LLC<br><a href=mailto:info@mayjuun.com>info@mayjuun.com</a><br><br>Website Theme:<br>Copyright 2020. Designed and Developed by <a href=http://www.themefisher.com target=_blank>Themefisher</a></p></div><div class="col-md-4 col-12"><ul class="social text-center text-md-right text-lg-right"></ul></div></div></div></footer><script src=https://mayjuun.com/plugins/jQurey/jquery.min.js></script><script src=https://mayjuun.com/plugins/form-validation/jquery.form.js></script><script src=https://mayjuun.com/plugins/form-validation/jquery.validate.min.js></script><script src=https://mayjuun.com/plugins/slick/slick.min.js></script><script src=https://mayjuun.com/plugins/bootstrap/bootstrap.min.js></script><script src=https://mayjuun.com/plugins/wow-js/wow.min.js></script><script src=https://mayjuun.com/plugins/slider/slider.js></script><script src=https://mayjuun.com/plugins/facncybox/jquery.fancybox.js></script><script src=https://mayjuun.com/js/script.min.js></script><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-50100304-2','auto'),ga('send','pageview')</script></body></html>