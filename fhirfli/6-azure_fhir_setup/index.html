<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=content-security-policy content="upgrade-insecure-requests; block-all-mixed-content; default-src 'self'; child-src 'self'; font-src 'self' https://fonts.googleapis.com https://fonts.gstatic.com; form-action 'self'; frame-src 'self' https://www.youtube.com/ https://fhirpath.mayjuun.com/ https://app.termly.io/; img-src 'self' 'unsafe-inline' data: w3.org/svg/2000; object-src 'none'; style-src 'self' https://fonts.googleapis.com https://www.google-analytics.com 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval' fhirpath.mayjuun.com https://app.termly.io/embed-policy.min.js https://fonts.googleapis.com https://www.google-analytics.com; connect-src 'self' https://www.google-analytics.com;"><meta charset=utf-8><meta name=description content="MayJuun: Less Clicking, More Doctoring"><meta name=author content="MayJuun"><meta name=generator content="Hugo 0.107.0"><meta name=format-detection content="telephone=no"><meta name=viewport content="width=device-width,initial-scale=1"><title>Azure FHIR® Setup</title><link rel=icon href=https://mayjuun.com/images/favicon-1.ico><link rel=stylesheet href=https://mayjuun.com/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://mayjuun.com/plugins/ionicons/ionicons.min.css><link rel=stylesheet href=https://mayjuun.com/plugins/animate-css/animate.css><link rel=stylesheet href=https://mayjuun.com/plugins/slider/slider.css><link rel=stylesheet href=https://mayjuun.com/plugins/slick/slick.css><link rel=stylesheet href=https://mayjuun.com/plugins/facncybox/jquery.fancybox.css><link rel=stylesheet href=https://mayjuun.com/plugins/hover/hover-min.css><link rel=stylesheet href=https://mayjuun.com/css/style.min.css integrity media=screen></head><body><section class="top-bar animated-header"><div class=container><div class=row><div class=col-lg-12><nav class="navbar navbar-expand-md navbar-light bg-light"><a class=navbar-brand href=https://mayjuun.com/><img src=https://mayjuun.com/images/logo-line.png alt=logo class=logo-box></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=https://mayjuun.com/>Home</a></li><li class=nav-item><a class=nav-link href=https://mayjuun.com/blog>Meta-Blog</a></li><li class=nav-item><a class=nav-link href=https://mayjuun.com/fhirfli>FHIR-FLI</a></li><li class=nav-item><a class=nav-link href=https://mayjuun.com/portfolio>App Portfolio</a></li><li class=nav-item><a class=nav-link href=https://mayjuun.com/about>About</a></li><li class=nav-item><a class=nav-link href=https://mayjuun.com/service>Services</a></li><li class=nav-item><a class=nav-link href=https://mayjuun.com/contact>Contact</a></li></div></nav></div></div></div></section><section class=global-page-header><div class=container><div class=row><div class=col-md-12><div class=block><h2>Azure FHIR® Setup</h2><div class=portfolio-meta><span>Sunday, May 16, 2021</span>|
<span>Tags:
FHIR®, Azure, Authentication</span></div></div></div></div></div></section><section class=single-post><div class=container><div class=row><div class=col-md-12><div class=post-content><h2 id=azure-fhir-setup>Azure FHIR® Setup</h2><p>Some of you may need to use the Azure FHIR® server (my apologies in advance, it cost me $80 over two weeks and then I was like, screw this). However, before I canceled it, I did manage to get authentication to work. I&rsquo;m not sure all of the settings I&rsquo;ve used are required, but this is what I needed to get it to work properly (why is authentication such a pain in the ass?)</p><p>After looking through all of the tutorials that were wrong and unhelpful, start here: <a href=https://docs.microsoft.com/en-us/azure/healthcare-apis/fhir-paas-portal-quickstart>https://docs.microsoft.com/en-us/azure/healthcare-apis/fhir-paas-portal-quickstart</a>. That will show you how to deploy an Azure FHIR® instance, which is the first step. Second step is here. Make sure you make those CORS settings, otherwise you can&rsquo;t access the server.</p><p>Alright, onto the next step, registering your app. This tutorial is mostly accurate: On step 4 in the first section, just be sure to put your app&rsquo;s callback/redirectURL. And set the type to Public client/native (mobile & desktop). Make note of both your Application (client) ID and your Directory (tenant) ID. Go onto API Permissions and Add a Permission. There should be 3 options across the top:</p><p><strong>Microsoft APIs</strong> | <strong>APIs my organization uses</strong> | <strong>My APIs</strong></p><p>Click on the middle one and select Azure Healthcare APIs. Click on Delegated Permissions, and select user_impersonation under the Permissions section. Lastly, follow the instructions to get your application secret. You don&rsquo;t need the secretID, just the secret (save it somewhere, because it&rsquo;s only displayed once).</p><p>Now, it&rsquo;s time to add some users. Open your Azure Active Directory. Click on Users. Add a New user. Fill out the required fields. Make note that the email address (and login) of this user is <a href=mailto:name@creatoremail.onmicrosoft.com>name@creatoremail.onmicrosoft.com</a>, I haven&rsquo;t yet been able to signin with an outside email.</p><p>Lastly, go back to your Azure API for FHIR®, and click on Access Control (IAM). Click Add -> Add Role Assignment. Under Role, select FHIR® Contributor (or whatever you think is appropriate), search for the user in the Select field. After you&rsquo;ve chosen, just click Save, and that should be the setup from the server side. It should now work with the normal SMART on FHIR/Oauth2 flow, as long as you have the following items:</p><p>clientId = &ldquo;123456789&rdquo;
tenantId = &ldquo;abcdefghi&rdquo;
clientSecret = jklmnopqrst"
URL of your FHIR API = &ldquo;<a href=https://myamazingfhir.azurehealthcareapis.com>https://myamazingfhir.azurehealthcareapis.com</a>&rdquo;</p><p>In addition to these, know that your auth & token urls are as follows:
<a href="https://login.microsoftonline.com/$tenantId/oauth2/authorize?resource=$azureUrl">https://login.microsoftonline.com/$tenantId/oauth2/authorize?resource=$azureUrl</a>
&lsquo;<a href="https://login.microsoftonline.com/$azureTenantId/oauth2/token'">https://login.microsoftonline.com/$azureTenantId/oauth2/token'</a></p><p>So just to be super clear, for the above values, your urls would be:
<a href="https://login.microsoftonline.com/abcdefghi/oauth2/authorize?resource=https://myamazingfhir.azurehealthcareapis.com">https://login.microsoftonline.com/abcdefghi/oauth2/authorize?resource=https://myamazingfhir.azurehealthcareapis.com</a>
&lsquo;<a href="https://login.microsoftonline.com/abcdefghi/oauth2/token'">https://login.microsoftonline.com/abcdefghi/oauth2/token'</a></p><p>Lastly, for the time being, you don&rsquo;t need to request scopes when you are making these calls.</p></div></div></div></div></section><section id=call-to-action><div class=container><div class=row><div class=col-md-12><div class=block><h2 class="title wow fadeInDown" data-wow-delay=.3s data-wow-duration=500ms>Want to Learn More?</h1><a href=../../contact class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=.7s data-wow-duration=500ms>Contact Us</a></div></div></div></div></section><footer id=footer><div class=container><div class="row content-justify-between"><p class=copyright>Website Content: Copyright
<span><script>document.write((new Date).getFullYear())</script></span>by MayJuun. Contact us: <a href=mailto:info@mayjuun.com>info@mayjuun.com</a><br>Website Theme: Copyright 2020. Original design by <a href=http://www.themefisher.com target=_blank>Themefisher</a> under <a href=https://github.com/themefisher/timer-hugo/blob/master/LICENSE target=_blank>MIT license</a>, modified by MayJuun<br>FHIR® is a registered trademark of Health Level Seven International (HL7) and its use does not constitute an endorsement of products by HL7®<div class="col copyright"><a href=https://mayjuun.com/policies target=_self>Policies</a>
~ <a href=https://mayjuun.com/policies/cookie-policy/ target=_self>Cookie Policy</a>
~ <a href=https://mayjuun.com/policies/disclaimer/ target=_self>Disclaimer</a>
~ <a href=https://mayjuun.com/policies/eula/ target=_self>EULA</a>
~ <a href=https://mayjuun.com/policies/privacy-notice/ target=_self>Privacy Notice</a>
~ <a href=https://mayjuun.com/policies/terms-and-conditions/ target=_self>Terms and Conditions</a></div></p></div></div></footer><script src=https://mayjuun.com/plugins/jQurey/jquery.min.js></script>
<script src=https://mayjuun.com/plugins/form-validation/jquery.form.js></script>
<script src=https://mayjuun.com/plugins/form-validation/jquery.validate.min.js></script>
<script src=https://mayjuun.com/plugins/slick/slick.min.js></script>
<script src=https://mayjuun.com/plugins/bootstrap/bootstrap.min.js></script>
<script src=https://mayjuun.com/plugins/wow-js/wow.min.js></script>
<script src=https://mayjuun.com/plugins/slider/slider.js></script>
<script src=https://mayjuun.com/plugins/facncybox/jquery.fancybox.js></script>
<script src=https://mayjuun.com/js/script.min.js></script>
<script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-50100304-2","auto"),ga("send","pageview")</script></body></html>